package sfs2x.games.battlefarm.utils{	import flash.display.Sprite;	import flash.display.LoaderInfo;	import flash.events.Event; 	public class Preloader extends Sprite	{		// Alias for stage LoaderInfo instance		private var targetLoaderInfo:LoaderInfo; 		// The percent loaded		private var loadPercent:Number = 0;				// Constructor		public function Preloader()		{			this.addEventListener(Event.ADDED_TO_STAGE, initPreloader);		} 		// Initialize variables		private function initPreloader(evt:Event):void		{			targetLoaderInfo = stage.loaderInfo; 			loading_txt.text = "Loading..."; 			this.removeEventListener(Event.ADDED_TO_STAGE, initPreloader );			this.addEventListener(Event.ENTER_FRAME, onCheckLoaded);		} 		// Check the status of the load, once complete dispatch a complete event.		private function onCheckLoaded(evt:Event):void 		{			loadPercent = targetLoaderInfo.bytesLoaded / targetLoaderInfo.bytesTotal;			loading_txt.text = "Loading... " + loadPercent;						if (loadPercent == 1)			{				// When download is complete, dispatch event to the Document Class				this.removeEventListener(Event.ENTER_FRAME, onCheckLoaded);				this.dispatchEvent(new Event(Event.COMPLETE));			}		}	}	}